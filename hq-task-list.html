<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task List - HQ System</title>    
    <script>
        (function() {
            const v = new Date().getTime();
            document.write(`<link rel="icon" href="img/logo.png?v=${v}">`);
            document.write(`<link rel="stylesheet" href="css/styles.css?v=${v}">`);
            document.write(`<link rel="stylesheet" href="css/hq-task-list.css?v=${v}">`);
            document.write(`<script src="https://cdn.jsdelivr.net/npm/chart.js"><\/script>`);
            document.write(`<script defer src="js/hq-task-list.js?v=${v}"><\/script>`);
        })();
    </script>
</head>
<body>
    <div id="loading-overlay">
        <div class="loading-spinner"></div>
        <div class="loading-text" data-i18n-key="loading-data">Loading data...</div>
        <div class="progress-bar-container">
            <div id="progress-bar" class="progress-bar"></div>
        </div>
        <div id="progress-text" class="progress-text">0%</div>
    </div>

    <!-- Ẩn container chính cho đến khi tải xong -->
    <div class="container" style="display: none;">
        <!-- Top bar, consistent with other pages -->
        <div class="home-screen">
            <button id="store-screen" data-i18n-key="go-to-store-screen">Go to Store screen</button>
            <h1 data-i18n-key="hq-system">HQ SYSTEM</h1>
        </div>

        <!-- Main navigation, consistent with other pages -->
        <div class="button-group button-row">
            <div class="button-row-buttons">
                <button id="go-to-hq-tasks" data-i18n-key="hq-tasks">HQ Tasks</button>
                <button id="go-to-task-list" class="selected" data-i18n-key="view-task-list">View Task List</button>
                <button id="go-to-create-task" data-i18n-key="create-new-task">Assign New Task</button>
                <button id="go-to-store-list" data-i18n-key="manage-stores">Manage Stores</button>
                <button id="go-to-reports" data-i18n-key="view-reports">View Reports</button>
            </div>
        </div>

        <!-- Main content of the page -->
        <main>
            <!-- Charts Section -->
            <section class="charts-section">
                <h1 class="section-title" data-i18n-key="view-task-list">View Task List</h1>
                <div class="chart-controls">
                    <button id="togglePie" class="chart-toggle red" data-i18n-key="show-progress-chart">Show Progress Chart</button>
                    <button id="toggleBar" class="chart-toggle red" data-i18n-key="show-weekly-stats-chart">Show Weekly Stats Chart</button>
                </div>
                <div class="charts-container">
                    <div class="chart-wrapper">
                        <canvas id="progressPieChart"></canvas>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="progressBarChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Task List Section -->
            <section class="task-list-section">
                <div class="filters">
                    <button id="time-filter-toggle" class="chart-toggle green" data-i18n-key="this-week">This Week</button>
                    <input type="date" id="startDate" />
                    <input type="date" id="endDate" />
                    <input type="text" id="taskSearch" data-i18n-key="search-by-task-name" placeholder="Search by Task Name..." />
                </div>

                <table>
                    <thead>
                        <tr>
                            <th data-i18n-key="no-short">No.</th>
                            <th id="weekFilter" class="clickable" data-i18n-key="week">Week</th>
                            <th id="respFilter" class="clickable" data-i18n-key="responsible">Responsible</th>
                            <th data-i18n-key="task">Task</th>
                            <th data-i18n-key="progress">Progress</th>
                            <th data-i18n-key="stores-unable">Stores Unable</th>
                            <th data-i18n-key="status">Status</th>
                        </tr>
                    </thead>
                    <tbody id="taskTableBody">
                        <!-- Rendered dynamically -->
                    </tbody>
                </table>
            </section>
        </main>
    </div>
</body>
</html>
